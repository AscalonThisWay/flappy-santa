<!DOCTYPE HTML>
<html lang="en">
    <head>
        <title>Flappy Bat</title>
        <link rel="apple-touch-icon-precomposed" href="data/img/touch-icon-iphone.png"/>
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="data/img/touch-icon-iphone-retina.png"/>
        <link rel="shortcut icon" href="data/img/favicon.ico">
        <link rel="stylesheet" type="text/css" media="screen" href="index.css">
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Flappy Bat">
        <meta charset="UTF-8" />
        <meta name="description" content="Flappy Bat - A Flappy Bird clone using MelonJS"/>
        <meta name="keywords" content="Flappy Bat, flappy, bird, game, html5, melonjs,clone"/>
        <meta name="robots" content="index, follow">
        <meta name="google-site-verification" content="RDZI9SqVaffd48uHfZMv67-YdvviOMe2HuULEYqVgd4" />
        <meta property="og:image" content="hhttps://github.com/maximegenaudet/maximegenaudet.github.io/tree/master/data/img/bg.png" />
        <meta property="og:title" content="Flappy Bat - A Flappy Bird clone using MelonJS"/>
        <meta property="og:url" content="https://github.com/maximegenaudet/maximegenaudet.github.io/"/>
        <meta property="og:site_name" content="Flappy Bat - MelonJS"/>
    </head>

    <body>
        <div id="pseudo" style="display:none">
            <div class="title">Flappy Bat</div>
            <input id="pseudotxt" type="text" required placeholder="Pseudo" class="pseudo"/>
            <input id="pseudopwd" type="password" required placeholder="Mot de passe" value="babilling" class="pseudo" style="display:none"/>
            <input type="button" value="Jouer !" class="pseudo" onclick="register()" >
            <div class="info">Entre un pseudo pour jouer :)</div>
        </div>
        <!-- Canvas placeholder -->
        <div id="screen" style="display:none"></div>

        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            var socket = io(); 
            socket.on('start', function(auth, err){
                if (auth){
                    document.getElementById('pseudo').style["display"] = "none";
                    document.getElementById('screen').style["display"] = "block";
                    localStorage.setItem('me.save.pseudo', document.getElementById('pseudotxt').value);
                    localStorage.setItem('me.save.pwd', document.getElementById('pseudopwd').value);
                }
                else alert(err);
            });

            socket.on('leaderboard', function(rows){
                me.save.rows=rows;
            });

            function register() {
                socket.emit('register', document.getElementById('pseudotxt').value, document.getElementById('pseudopwd').value);
            }
        </script>
        <!-- melonJS Library -->
        <script type="text/javascript" src="/js/melonJS-min.js" ></script>
        <!-- The game -->
        <script type="text/javascript" src="/js/game.js" ></script>
        <!-- entities -->
        <script type="text/javascript" src="/js/entities/entities.js" ></script>
        <script type="text/javascript" src="/js/entities/HUD.js" ></script>
        <!-- screens -->
        <script type="text/javascript" src="/js/screens/gameover.js" ></script>
        <script type="text/javascript" src="/js/screens/play.js" ></script>
        <script type="text/javascript" src="/js/screens/title.js" ></script>
        <!-- onload trigger -->
        <script type="text/javascript">
            window.onReady(function onReady() {
                if (localStorage.getItem('me.save.pseudo')){
                    document.getElementById('screen').style["display"] = "block";
                }
                else document.getElementById('pseudo').style["display"] = "block";
                game.onload();
            });
        </script>
    </body>
</html>
